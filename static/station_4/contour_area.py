# python contour_area.py --image D:\pravi\burr\burr_july\9_july_25\support_piston\16_06_012\VCXG.2-32C\burr\image0000208.bmp

# python contour_area.py --image D:\pravi\burr\burr_july\9_july_25\support_piston\16_06_012\VCXG.2-32C\VCXG.2-32C\image0000115.bmp


# python 01_dimension_contour_highlight.py --image D:\pravi\burr\burr_july\9_july_25\support_piston\16_06_012\VCXG.2-32C\burr\image0000208.bmp

# python contour_area.py --image D:\pravi\burr\burr_july\9_july_25\support_piston\16_06_012\VCXG.2-32C\VCXG.2-32C\VCXG.2-32C\image0000323.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_3\dataset\12_9_25\19_08_012\VCXG.2-32C\image0000296.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_3\dataset\12_9_25\19_08_012\VCXG.2-32C\image0000343.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_3\dataset\12_9_25\22_10_012\VCXG.2-32C\image0000348.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_4\dataset\12_9_25\22_10_012\VCXG.2-32C\VCXG.2-32C\image0000300.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_4\dataset\12_9_25\28_10_018\VCXG.2-32C\image0000302.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_3\dataset\12_9_25\28_10_018\image0000350.bmp
 # python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_4\dataset\12_9_25\16.06.011\VCXG.2-32C\image0000304.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_3\dataset\12_9_25\16.06.011\VCXG.2-32C\image0000352.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_3\dataset\12_9_25\support_piston\16.06.012\VCXG.2-32C\image0000338.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_4\dataset\12_9_25\support_piston\16.06.012\VCXG.2-32C\VCXG.2-32C\image0000306.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_3\dataset\12_9_25\support_piston\19.08.013\VCXG.2-32C\image0000356.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_4\dataset\12_9_25\support_piston\19.08.013\image0000308.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_3\dataset\12_9_25\support_piston\22.10.013\VCXG.2-32C\image0000358.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_4\dataset\12_9_25\support_piston\22.10.013\VCXG.2-32C\image0000310.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_3\dataset\12_9_25\support_piston\28.10.019\VCXG.2-32C\image0000362.bmp
# python contour_area.py --image D:\PIM_08-07-2025\Pravi_Flask\static\Cam1InputImages\station_4\dataset\12_9_25\support_piston\28.10.019\VCXG.2-32C\VCXG.2-32C\image0000312.bmp
# python contour_area.py --image "D:\Pravi\burr_images\new_glass\station1\dataset\19_9_25\VCXG.2-32C\image0000315.bmp"
# python contour_area.py --image D:\PIM_15-09-25\Pravi_Flask\static\Cam1InputImages\cam4.bmp
# python contour_area.py --image D:\PIM_15-09-25\Pravi_Flask\static\Cam1InputImages\cam4.bmp
# python contour_area.py --image D:\Pravi\burr_images\new_glass\parts\19_9_25\support_piston\22.10.013\VCXG.2-32C\image0000321.bmp
# python contour_area.py --image D:\Pravi\burr_images\new_glass\parts\19_9_25\support_piston\19.08.013\VCXG.2-32C\image0000373.bmp
# python contour_area.py --image D:\Pravi\burr_images\new_glass\parts\19_9_25\support_piston\19.08.013\VCXG.2-32C\image0000323.bmp
# python contour_area.py --image D:\Pravi\burr_images\new_glass\parts\19_9_25\support_piston\16.06.012\image0000375.bmp
# python contour_area.py --image D:\Pravi\burr_images\new_glass\parts\19_9_25\piston\22.10.015\VCXG.2-65C.R\image0000280.bmp

# python contour_area.py --image D:\PIM_15-09-25\Pravi_Flask\static\Cam1InputImages\cam4.bmp

# python contour_area.py --image D:\PIM_15-09-25\Pravi_Flask\static\Cam1InputImages\cam3.bmp

# python contour_area.py --image "D:\PIM_25-09-25\Pravi_Flask\static\Cam1InputImages\input_backup_cam4\2025-10-04\16\cam4_2025-10-04_16-26-25.png.bmp"

# python contour_area.py --image "D:\PIM_25-09-25\Pravi_Flask\static\Cam1InputImages\input_backup_cam4\2025-10-04\16\cam4_2025-10-04_16-24-38.png.bmp"

# python contour_area.py --image "D:\PIM_25-09-25\Pravi_Flask\static\Cam1InputImages\input_backup_cam4\2025-10-04\16\cam4_2025-10-04_16-26-25.png.bmp"
# python contour_area.py --image D:\PIM_25-09-25\Pravi_Flask\static\Cam1InputImages\input_backup_cam4\2025-10-04\17\cam4_2025-10-04_17-03-41.png.bmp

# python contour_area.py --image "D:\PIM_25-09-25\Pravi_Flask\static\Cam1InputImages\input_backup_cam3\2025-10-04\17\cam3_2025-10-04_17-03-40.png.bmp"
# python contour_area.py --image "D:\PIM_25-09-25\Pravi_Flask\static\Cam1InputImages\input_backup_cam3\2025-10-04\17\cam3_2025-10-04_17-03-40.png.bmp"
# python contour_area.py --image "D:\PIM_25-09-25\Pravi_Flask\static\Cam1InputImages\cam3.bmp"
# python contour_area.py --image "D:\Pravi\burr_images\new_glass\station3\dataset\9_oct_25\VCXG.2-32C\image0000389.bmp"
# python contour_area.py --image "D:/Pravi/burr_images/new_glass/station3/dataset/9_oct_25/VCXG.2-32C/image0000384.bmp"
# python contour_area.py --image "D:/Pravi/burr_images/new_glass/station4/dataset/10_oct_25/image0000328.bmp"
# python contour_area.py --image "D:/Pravi/burr_images/new_glass/station4/dataset/10_oct_25/image0000338.bmp"
import cv2
import numpy as np
import sys
import argparse

def draw_contours(img):
    # Convert the image to grayscale
    gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)

    # Apply thresholding to binarize the image
    _, binary = cv2.threshold(gray, 80, 255, cv2.THRESH_BINARY)

    # Perform binary inversion
    binary_inverse = cv2.bitwise_not(binary)

    # Find contours in the binary inverse image
    contours, _ = cv2.findContours(binary_inverse, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)

    # Sort contours by area in descending order
    sorted_contours = sorted(contours, key=cv2.contourArea, reverse=True)[:10]

    # Create a blank image to draw contours on
    contour_img = np.zeros_like(image)

    # Draw specific contours
    # cv2.drawContours(contour_img, [sorted_contours[0]], -1, (255, 0, 0), 2)  # sky blue
    # cv2.drawContours(contour_img, [sorted_contours[1]], -1, (0, 255, 0), 2)  # /yellow
    # cv2.drawContours(contour_img, [sorted_contours[2]], -1, (0, 0, 255), 2)  # yellow
    cv2.drawContours(contour_img, [sorted_contours[3]], -1, (255, 0, 0), 2)  # sky blu/e
    # cv2.drawContours(contour_img, [sorted_contours[4]], -1, (0, 255, 0), 2)  # yellow
    cv2.drawContours(contour_img, [sorted_contours[5]], -1, (0, 0, 255), 2)  # yello/w
    # cv2.drawContours(contour_img, [sorted_contours[6]], -1, (255, 0, 0), 2)  # sky blue
    # cv2.drawContours(contour_img, [sorted_contours[7]], -1, (0, 255, 0), 2)  # yellow
    # cv2.drawContours(contour_img, [sorted_contours[8]], -1, (0, 0, 255), 2)  # yellow
    # Print area of each contour
    print("Top 10 Contour Areas:")
    for i, cnt in enumerate(sorted_contours):
        area = cv2.contourArea(cnt)
        print(f"Contour #{i}: Area = {area:.2f} pixels")

    # Show and save result
    cv2.imshow("all contour", contour_img)
    cv2.imwrite("all_contour.jpg", contour_img)

    cv2.waitKey(0)
    cv2.destroyAllWindows()

if __name__ == "__main__":
    ap = argparse.ArgumentParser()
    ap.add_argument("-i", "--image", required=True, help="path to the input image")
    args = vars(ap.parse_args())

    image = cv2.imread(args["image"])
    if image is None:
        print(f"Error: Could not open or find the image at path '{args['image']}'")
        sys.exit()

    draw_contours(image)
